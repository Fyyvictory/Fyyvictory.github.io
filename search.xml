<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[androidå¼€å‘è‰ºæœ¯æŽ¢ç´¢ç¬”è®°]]></title>
    <url>%2F2019%2F07%2F12%2Fandroid%E5%BC%80%E5%8F%91%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[taskaffinity,ä»»åŠ¡ç›¸å…³æ€§ï¼Œè¿™ä¸ªå‚æ•°æ ‡è¯†äº†ä¸€ä¸ªactivityæ‰€éœ€è¦çš„ä»»åŠ¡æ ˆçš„åå­—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰activityæ‰€å±žçš„ä»»åŠ¡æ ˆçš„åå­—ä¸ºåº”ç”¨çš„åŒ…åã€‚å¦‚æžœä¸ºæ¯ä¸€ä¸ªactivityå•ç‹¬åˆ¶å®štaskaffinityå±žæ€§ï¼Œè¿™ä¸ªå±žæ€§ä¸èƒ½å’ŒåŒ…åä¸€ç›´ï¼Œå¦åˆ™ç›¸å½“äºŽæ²¡æœ‰æŒ‡å®šã€‚taskaffinityå±žæ€§ä¸»è¦æ˜¯å’ŒsingleTaskå¯åŠ¨æ¨¡å¼æˆ–allowTaskReparentingå±žæ€§é…å¯¹ä½¿ç”¨ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹æ²¡æœ‰æ„ä¹‰ã€‚å¦å¤–ï¼Œä»»åŠ¡æ ˆåˆ†ä¸ºå‰å°ä»»åŠ¡æ ˆå’ŒåŽå°ä»»åŠ¡æ ˆï¼ŒåŽå°ä»»åŠ¡æ ˆä¸­çš„activityä½äºŽæš‚åœçŠ¶æ€ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡åˆ‡æ¢å°†åŽå°ä»»åŠ¡æ ˆå†æ¬¡è°ƒåˆ°å‰å°ã€‚ å½“taskAffinityå’ŒsingleTaskå¯åŠ¨æ¨¡å¼é…å¯¹ä½¿ç”¨çš„æ—¶å€™ï¼Œä»–æ˜¯å…·æœ‰è¯¥æ¨¡å¼çš„activityçš„ç›®å‰ä»»åŠ¡æ ˆçš„åå­—ï¼Œå¾…å¯åŠ¨çš„activityä¼šè¿è¡Œåœ¨åå­—å’ŒtaskAffinityç›¸åŒçš„ä»»åŠ¡æ ˆä¸­ã€‚ å½“taskAffinityå’ŒallowTaskReparentingç»“åˆæ—¶ï¼Œegï¼š æœ‰ä¸¤ä¸ªåº”ç”¨a,bï¼Œbçš„ä¸€ä¸ªactivityåä¸ºx,xçš„allowTaskReparentingå±žæ€§ä¸ºtrueçš„è¯ï¼Œé‚£ä¹ˆå½“åº”ç”¨aå¯åŠ¨åº”ç”¨xçš„æ—¶å€™ï¼Œç„¶åŽæŒ‰homeé”®å›žåˆ°æ¡Œé¢ï¼Œç„¶åŽå†å•å‡»bçš„æ¡Œé¢å›¾æ ‡ï¼Œè¿™æ—¶å¯åŠ¨çš„å¹¶ä¸æ˜¯bçš„ä¸»activityï¼Œè€Œæ˜¯é‡æ–°æ˜¾ç¤ºäº†å·²ç»è¢«åº”ç”¨Aå¯åŠ¨çš„activity xï¼Œæˆ–è€…è¯´xä»Žaçš„ä»»åŠ¡æ ˆä¸­è½¬ç§»åˆ°äº†bçš„ä»»åŠ¡æ ˆä¸­ IPCï¼Œè¿›ç¨‹é—´é€šä¿¡ï¼Œæˆ–è€…ç§°ä¸ºè·¨è¿›ç¨‹é€šä¿¡ï¼ŒæŒ‡çš„æ˜¯ä¸¤ä¸ªè¿›ç¨‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„è¿‡ç¨‹ã€‚Androidä¸­æœ€æœ‰ç‰¹è‰²çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼å°±æ˜¯Binderã€‚å…¶æ¬¡ï¼Œé€šè¿‡socketä¹Ÿå¯ä»¥å®žçŽ°ä»»æ„ä¸¤ä¸ªç»ˆç«¯ä¹‹é—´çš„é€šä¿¡ã€‚ ä¸€ä¸ªåº”ç”¨å†…å¼€å¯å¤šè¿›ç¨‹çš„æ–¹å¼æ˜¯è®¾å®šAndroidmanifest.xmlä¸­çš„processå±žæ€§ï¼Œå…¶ä¸­processå±žæ€§çš„å€¼ä»¥â€:â€œå¼€å¤´çš„å±žäºŽå½“å‰åº”ç”¨çš„ç§æœ‰è¿›ç¨‹ï¼Œå…¶å®ƒåº”ç”¨çš„ç»„ä»¶ä¸å¯ä»¥å’Œå®ƒè·‘åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œè€Œprocessçš„å€¼ä¸ä»¥â€:â€œå¼€å¤´çš„è¿›ç¨‹å±žäºŽå…¨å±€è¿›ç¨‹ï¼Œå…¶ä»–åº”ç”¨é€šè¿‡shareUIDæ–¹å¼å¯ä»¥å’Œå®ƒè·‘åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨å¤šè¿›ç¨‹ä¼šé€ æˆä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„é—®é¢˜ï¼š é™æ€æˆå‘˜å’Œå•ä¾‹æ¨¡å¼å®Œå…¨å¤±æ•ˆã€‚ çº¿ç¨‹åŒæ­¥æœºåˆ¶å®Œå…¨å¤±æ•ˆã€‚ sharedPreferencesçš„å¯é æ€§ä¸‹é™ã€‚ Applicationä¼šå¤šæ¬¡åˆ›å»ºã€‚ å››å¤§ç»„ä»¶ä¸­ä¸‰å¤§ç»„ä»¶ï¼ˆactivityï¼Œserviceï¼Œreceiverï¼‰éƒ½æ˜¯æ”¯æŒåœ¨intentä¸­ä¼ é€’bundleæ•°æ®çš„ï¼Œç”±äºŽbundleå®žçŽ°äº†parcelableæŽ¥å£ï¼Œæ‰€ä»¥ä»–å¯ä»¥æ–¹ä¾¿çš„åœ¨ä¸åŒè¿›ç¨‹é—´ä¼ è¾“ ä½¿ç”¨æ–‡ä»¶å…±äº«ã€‚æ–‡ä»¶å…±äº«ä¹Ÿæ˜¯ä¸€ç§ä¸é”™çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œä¸¤ä¸ªè¿›ç¨‹é€šè¿‡è¯»/å†™åŒä¸€ä¸ªæ–‡ä»¶æ¥äº¤æ¢æ•°æ®ã€‚ç„¶è€Œå¯èƒ½å­˜åœ¨çš„é—®é¢˜æ˜¯ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ã€‚ tipsï¼šååºåˆ—åŒ–å¾—åˆ°çš„å¯¹è±¡åªæ˜¯åœ¨å†…å®¹ä¸Šå’Œåºåˆ—åŒ–ä¹‹å‰çš„å¯¹è±¡ä¸€æ ·ï¼Œä½†æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸¤ä¸ªå¯¹è±¡ã€‚ Tips2ï¼šsharePreferencesåº•å±‚å®žçŽ°ä¸Šæ˜¯é‡‡ç”¨XMLæ–‡ä»¶æ¥å­˜å‚¨çš„é”®å€¼å¯¹ï¼Œæœ¬è´¨ä¸Šä¹Ÿå±žäºŽæ–‡ä»¶çš„ä¸€ç§ï¼Œä½†ç”±äºŽç³»ç»Ÿå¯¹å®ƒçš„è¯»å†™æœ‰ä¸€å®šçš„ç¼“å­˜ç­–ç•¥ï¼Œå³å†…å­˜ä¸­ä¼šå­˜åœ¨ä¸€ä»½sharepreferencesæ–‡ä»¶çš„ç¼“å­˜ï¼Œå› æ­¤ï¼Œåœ¨å¤šè¿›ç¨‹æ¨¡å¼ä¸‹ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»å†™å˜å¾—ä¸å¯é ï¼Œå½“é¢å¯¹é«˜å¹¶å‘çš„è¯»å†™è®¿é—®æ—¶ï¼ŒsharePreferencesæœ‰å¾ˆå¤§çš„å‡ çŽ‡ä¼šä¸¢å¤±æ•°æ®ï¼Œå› æ­¤ï¼Œä¸å»ºè®®åœ¨è¿›ç¨‹é—´é€šä¿¡ä½¿ç”¨sharePreferencesã€‚ ä½¿ç”¨messengerã€‚messengeræ˜¯ä¸€ç§è½»é‡çº§çš„IPCæ–¹æ¡ˆï¼Œå¥¹çš„åº•å±‚å®žçŽ°æ˜¯AIDLã€‚åœ¨è¿›ç¨‹é—´é€šä¿¡çš„æ—¶å€™ï¼ŒAndroid 2.2ä»¥å‰messageçš„objectå­—æ®µä¸æ”¯æŒè·¨è¿›ç¨‹ä¼ è¾“ï¼Œ2.2ä»¥åŽmessageçš„objectå­—æ®µä¹Ÿä»…æ”¯æŒç³»ç»Ÿæä¾›çš„å®žçŽ°parcelableæŽ¥å£çš„å¯¹è±¡æ‰èƒ½é€šè¿‡å®ƒæ¥ä¼ è¾“ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è‡ªå®šä¹‰çš„parcelableå¯¹è±¡æ˜¯æ— æ³•é€šè¿‡objectå­—æ®µæ¥ä¼ è¾“çš„ã€‚ä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä½¿ç”¨bundleæ¥ä¼ è¾“å¤§é‡çš„æ•°æ®ç±»åž‹ã€‚ ä½¿ç”¨AIDLã€‚ä½¿ç”¨messengeræ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„æ–¹æ³•æ—¶ï¼Œmessengeræ˜¯ä»¥ä¸²è¡Œçš„æ–¹å¼å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯ï¼Œå¦‚æžœå¤§é‡çš„ä¿¡æ¯åŒæ—¶å‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä»ç„¶åªèƒ½ä¸€ä¸ªä¸€ä¸ªå¤„ç†ï¼Œå¦‚æžœæœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚ï¼Œé‚£ä¹ˆä½¿ç”¨messengerå°±ä¸å¤ªåˆé€‚äº†ã€‚åŒæ—¶ï¼Œmessengerçš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†ä¼ é€’ä¿¡æ¯ï¼Œå¾ˆå¤šæ—¶å€™å¯èƒ½éœ€è¦è·¨è¿›ç¨‹è°ƒç”¨æœåŠ¡ç«¯çš„æ–¹æ³•ï¼Œè¿™ç§æƒ…å½¢messengerå°±æ— æ³•åšåˆ°äº†ã€‚è¿™ç§æƒ…å†µä¸‹çš„è·¨è¿›ç¨‹æ“ä½œå°±å¯ä»¥ä½¿ç”¨AIDLæ¥å®žçŽ°ã€‚ remoteCallbackList æ˜¯ç³»ç»Ÿä¸“é—¨æä¾›çš„ç”¨äºŽåˆ é™¤è·¨è¿›ç¨‹listenerçš„æŽ¥å£ã€‚CallbackListæ˜¯ä¸€ä¸ªæ³›åž‹ï¼Œæ”¯æŒç®¡ç†ä»»æ„çš„AIDLæŽ¥å£ã€‚å®ƒçš„å·¥ä½œåŽŸç†æ˜¯å…¶å†…éƒ¨æœ‰ä¸€ä¸ªMapç»“æž„ä¸“é—¨ç”¨æ¥ä¿å­˜æ‰€æœ‰AIDLçš„å›žè°ƒï¼Œè¿™ä¸ªMapçš„keyæ˜¯Ibinderç±»åž‹ï¼Œvalueæ˜¯Callbackç±»åž‹ã€‚ ä¸ºäº†ç¨‹åºçš„å¥å£®æ€§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€ä»¶äº‹ï¼ŒBinderå¯èƒ½ä¼šæ„å¤–æ­»äº¡ï¼Œè¿™å¾€å¾€æ˜¯å› ä¸ºæœåŠ¡ç«¯è¿›ç¨‹æ„å¤–åœæ­¢äº†ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦é‡æ–°è¿žæŽ¥æœåŠ¡ã€‚æœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ˜¯ç»™Binderè®¾ç½®DeathRecipientç›‘å¬ï¼Œå½“Binderæ­»äº¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ”¶åˆ°BinderDiedæ–¹æ³•å›žè°ƒï¼Œåœ¨binderDiedæ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥é‡è¿žè¿œç¨‹æœåŠ¡ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨onServiceDisconnectedä¸­é‡è¿žè¿œç¨‹æœåŠ¡ã€‚ä¸¤è€…åŒºåˆ«åœ¨äºŽonServiceDisconnectedæ˜¯åœ¨å®¢æˆ·ç«¯çš„UIçº¿ç¨‹ä¸­ä¼šæŽ‰çš„ï¼Œè€ŒbinderDiedåœ¨å®¢æˆ·ç«¯çš„Binderçº¿ç¨‹æ± ä¸­è¢«å›žè°ƒï¼Œä¹Ÿå°±æ˜¯è¯´binderDiedä¸­ä¸èƒ½è®¿é—®UIã€‚ ä½¿ç”¨ContentProviderã€‚ContentProvideræ˜¯Androidä¸­æä¾›çš„ä¸“é—¨ç”¨äºŽä¸åŒåº”ç”¨é—´è¿›è¡Œæ•°æ®å…±äº«çš„æ–¹å¼ã€‚ContentProviderçš„åº•å±‚å®žçŽ°åŒæ ·æ˜¯Binderã€‚ContentProviderä¸»è¦ä»¥è¡¨æ ¼çš„å½¢å¼æ¥ç»„ç»‡æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«å¤šä¸ªè¡¨ã€‚æ­¤å¤–ï¼ŒContentProviderè¿˜æ”¯æŒæ–‡ä»¶æ•°æ®ã€‚ä½†æ˜¯éœ€è¦å…³æ³¨å¤šçº¿ç¨‹è®¿é—®çš„åŒæ­¥é—®é¢˜ã€‚ MotionEventï¼Œå³æ‰‹æŒ‡æŽ¥è§¦å±å¹•ä¹‹åŽå‘ç”Ÿçš„ä¸€ç³»åˆ—çš„äº‹ä»¶ï¼Œå¸¸è§çš„åŒ…æ‹¬ACTION_DOWNï¼ŒACTION_UPï¼ŒACTION_MOVEï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€æ¬¡æ‰‹æŒ‡è§¦æ‘¸å±å¹•çš„è¡Œä¸ºä¼šè§¦å‘ä¸€ç³»åˆ—ç‚¹å‡»äº‹ä»¶ã€‚æ­¤å¤–ç³»ç»Ÿè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç»„æ–¹æ³•ï¼šgetX/getYå’ŒgetRowXå’ŒgetRowYã€‚ä»–ä»¬çš„åŒºåˆ«åœ¨äºŽå‰è€…æ˜¯è¿”å›žç›¸å¯¹äºŽå½“å‰Viewå·¦ä¸Šè§’çš„xå’Œyåæ ‡ï¼Œè€ŒåŽè€…æ˜¯è¿”å›žçš„ç›¸å¯¹äºŽæ‰‹æœºå±å¹•å·¦ä¸Šè§’çš„xå’Œyåæ ‡ã€‚ TouchSlopæ˜¯ç³»ç»Ÿæ‰€èƒ½è¯†åˆ«å‡ºçš„è¢«è®¤ä¸ºæ˜¯æ»‘åŠ¨çš„æœ€å°è·ç¦»ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå¦‚æžœæ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ»‘åŠ¨çš„è·ç¦»å°äºŽè¿™ä¸ªå¸¸é‡ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¸è®¤ä¸ºè¯¥æ“ä½œæ˜¯æ»‘åŠ¨è¡Œä¸ºã€‚ViewConfiguration.get(getContext()).getScaledTouchSlop()å¯ä»¥èŽ·å–åˆ°è¯¥å¸¸é‡ã€‚ VelocityTrackerï¼Œé€Ÿåº¦è¿½è¸ªã€‚ç”¨äºŽè¿½è¸ªæ‰‹æŒ‡åœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­çš„é€Ÿåº¦ï¼ŒåŒ…æ‹¬æ°´å¹³å’Œç«–ç›´æ–¹å‘çš„é€Ÿåº¦ã€‚å…¶ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š åœ¨Viewçš„onTouchEventæ–¹æ³•ä¸­è¿½è¸ªå½“å‰ç‚¹å‡»äº‹ä»¶çš„é€Ÿåº¦ 123VelocityTricker velocityTracker = VelocityTracker.obtain;//æŠŠMotionEventå¯¹è±¡ä¼ è¿›åŽ»velocityTracker.addMovement(event); ç„¶åŽé‡‡ç”¨ä»¥ä¸‹æ–¹å¼èŽ·å–å½“å‰é€Ÿåº¦ã€‚ 123velocityTricker.computeCurrentVelocity(1000);int x = velocityTracker.getXVelocity();int y = velocityTracker.getYVelocity(); Ps:æ³¨æ„ï¼Œç¬¬ä¸€ï¼ŒèŽ·å–é€Ÿåº¦ä¹‹å‰å¿…é¡»å…ˆè®¡ç®—é€Ÿåº¦ï¼Œå³åœ¨ä½¿ç”¨getXVelocityå’ŒgetYVelocityè¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨computeCurrentVelocityæ–¹æ³•ã€‚ç¬¬äºŒï¼Œè¿™é‡Œçš„é€Ÿåº¦æ‰€æŒ‡çš„æ˜¯ä¸€æ®µæ—¶é—´å†…æ‰‹æŒ‡æ‰€åˆ’è¿‡çš„åƒç´ æ•°ã€‚ç¬¬ä¸‰ï¼Œé€Ÿåº¦å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œå› ä¸ºé€Ÿåº¦çš„æ–¹å‘å¦‚æžœæ˜¯ä»Žå³å¾€å·¦æˆ–è€…ä»Žä¸‹å‘ä¸Šï¼Œé€Ÿåº¦å³ä¸ºè´Ÿå€¼ã€‚ æœ€åŽï¼Œå½“ä¸éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨clearæ–¹æ³•æ¥é‡ç½®å¹¶å›žæ”¶å†…å­˜ã€‚ 12velocityTracker.clear();velocityTracker.recycle(); GestureDetector,æ‰‹åŠ¿æ£€æµ‹ï¼Œç”¨äºŽè¾…åŠ©ç›‘æµ‹ç”¨æˆ·çš„å•å‡»ã€æ»‘åŠ¨ã€é•¿æŒ‰ã€åŒå‡»ç­‰è¡Œä¸ºã€‚ä½¿ç”¨è¿‡ç¨‹å¦‚ä¸‹ï¼š 123456Gesturedetector detector = new GestureDetector(this);//è§£å†³é•¿æŒ‰å±å¹•åŽæ— æ³•æ‹–åŠ¨çš„çŽ°è±¡detector.setIsLongpressEnable(false);//æŽ¥ç®¡ç›®æ ‡Viewçš„onTouchEventæ–¹æ³•ï¼Œåœ¨å¾…ç›‘å¬Viewçš„onTouchEventæ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹å®žçŽ°ï¼šboolean consume = detector.onTouchEvent(event);return consume; åšå®Œè¿™ä¸¤æ­¥ï¼Œå¯ä»¥æœ‰é€‰æ‹©çš„å®žçŽ°OnGestureListenerå’ŒOnDoubleTapListenerä¸­çš„æ–¹æ³•ã€‚ å»ºè®®ï¼šå¦‚æžœåªæ˜¯ç›‘å¬æ»‘åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨onTouchEventä¸­å®žçŽ°ï¼Œå¦‚æžœè¦ç›‘å¬åŒå‡»è¿™ç§è¡Œä¸ºçš„è¯ï¼Œä½¿ç”¨GestureDetectorä¼šæ›´åŠ æ–¹ä¾¿ã€‚ Scroller ï¼Œå¼¹æ€§æ»‘åŠ¨å¯¹è±¡ï¼Œç”¨äºŽå®žçŽ°Viewçš„å¼¹æ€§æ»‘åŠ¨ã€‚å½“ä½¿ç”¨Viewçš„scrollto/scrollbyè¿›è¡Œçš„æ»‘åŠ¨æ˜¯ä¸€çž¬é—´å®Œæˆçš„ï¼Œä½¿ç”¨scrollerå¯ä»¥å®žçŽ°è¿‡æ¸¡æ•ˆæžœçš„æ»‘åŠ¨ã€‚ä½¿ç”¨ä¸­ï¼ŒScrolleréœ€è¦ä¸ŽcomputeScrollæ–¹æ³•é…åˆä½¿ç”¨å¤ªèƒ½å…±åŒå®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚ä½¿ç”¨ä¹Ÿæ˜¯å›ºå®šèŒƒå¼ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516Scroller scroller = new Scroller(context);// ç¼“æ…¢æ»šåˆ°æŒ‡å®šä½ç½®private void smoothScrollTo(int desX,int dexY)&#123; int scrollX = getScrollX(); int delta = desX - scrollX; scroller.startScroll(scrollX,0,delta,0,1000)ï¼› invalidate();&#125;@Overridepublic void computeScroll()&#123; if(scroller.computeScrollOffset())&#123; scrollTo(scroller.getCurrX(),scroller.getCurrY()); postInvalidate(); &#125; &#125; view çš„æ»‘åŠ¨å®žçŽ°æœ‰ä¸‰ç§æ–¹å¼ï¼š é€šè¿‡viewæœ¬èº«æä¾›çš„scrollTo/scrollByæ–¹æ³•æ¥å®žçŽ°æ»‘åŠ¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•åªèƒ½æ”¹å˜viewå†…å®¹çš„ä½ç½®è€Œä¸èƒ½æ”¹å˜Viewåœ¨å¸ƒå±€ä¸­çš„ä½ç½®ã€‚ ä½¿ç”¨åŠ¨ç”»ï¼Œé€šè¿‡åŠ¨ç”»è®©ä¸€ä¸ªviewå¹³ç§»ã€‚ä¸»è¦æ“ä½œViewçš„translationXå’ŒtranslationYå±žæ€§ã€‚éœ€è¦æ³¨æ„çš„æ˜¯viewåªèƒ½æ”¹å˜viewè§†è§‰ä¸Šçš„ä½ç½®ï¼Œä½†æ˜¯å¹¶ä¸èƒ½çœŸæ­£çš„æ”¹å˜viewçš„ä½ç½®å‚æ•°ã€‚å±žæ€§åŠ¨ç”»è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå±žæ€§åŠ¨ç”»ä½¿ç”¨å¦‚ä¸‹ï¼š 1ObjectAnimation.ofFloat(targetView,"translationX",0,100).setDuration(100).start(); æ”¹å˜å¸ƒå±€å‚æ•°ã€‚å³æ”¹å˜LayoutParamsã€‚é€šè¿‡æ”¹å˜LayoutParamsçš„æ–¹å¼åŽ»å®žçŽ°Viewçš„æ»‘åŠ¨åŒæ ·æ˜¯ä¸€ç§å¾ˆçµæ´»çš„æ–¹å¼ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„æƒ…å†µåŽ»åšä¸åŒçš„å¤„ç†ã€‚ ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’ï¼Œè¯·çœ‹ä¸‹æ–¹ä¼ªä»£ç ï¼š 123456789public boolean dispatchTouchEvent(MotionEvent ev)&#123; boolean consume = false; if(onInterceptTouchEvent(ev))&#123; consume = onTouchEvent(ev); &#125;else&#123; consume = child.dispatchTouchEvent(ev); &#125; return consume;&#125; å½“ä¸€ä¸ªViewéœ€è¦å¤„ç†äº‹ä»¶æ—¶ï¼Œå¦‚æžœå®ƒè®¾ç½®äº†OnTouchListenerï¼Œé‚£ä¹ˆOnTouchListenerä¸­çš„onTouchæ–¹æ³•ä¼šè¢«å›žè°ƒã€‚è¿™ä¸ªäº‹ä»¶å¦‚ä½•å¤„ç†è¿˜è¦çœ‹OnTouchçš„è¿”å›žå€¼ï¼Œå¦‚æžœè¿”å›žfalseï¼Œåˆ™å½“å‰Viewçš„onTouchEventæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æžœè¿”å›žtrueï¼Œé‚£ä¹ˆonTouchEventæ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ã€‚ç”±æ­¤å¯è§ï¼Œç»™Viewè®¾ç½®çš„OnTouchListenerï¼Œå…¶ä¼˜å…ˆçº§æ¯”onTouchEventè¦é«˜ã€‚åœ¨onTouchEventæ–¹æ³•ä¸­ï¼Œå¦‚æžœå½“å‰è®¾ç½®çš„æœ‰OnClickListenerï¼Œé‚£ä¹ˆonclickæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„OnClickListenerä¼˜å…ˆçº§æœ€ä½Žï¼Œå³å¤„äºŽäº‹ä»¶ä¼ é€’çš„å°¾ç«¯ã€‚ å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶äº§ç”ŸåŽï¼Œä¼ é€’è¿‡ç¨‹å¦‚ä¸‹ï¼šactivity â€”&gt;windowâ€”&gt;Viewã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäº‹ä»¶åºåˆ—åªèƒ½è¢«ä¸€ä¸ªViewæ‹¦æˆªä¸”æ¶ˆè€—ï¼Œå› ä¸ºä¸€æ—¦ä¸€ä¸ªå…ƒç´ æ‹¦æˆªäº†æŸæ¬¡æ—¶é—´ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªäº‹ä»¶åºåˆ—å†…çš„æ‰€æœ‰äº‹ä»¶éƒ½ä¼šç›´æŽ¥äº¤ç»™å®ƒå¤„ç†ï¼Œå› æ­¤å®ƒçš„onInterceptTouchEventä¸ä¼šå†è¢«è°ƒç”¨ã€‚ æŸä¸ªViewä¸€æ—¦å¼€å§‹å¤„ç†äº‹ä»¶ï¼Œå¦‚æžœå®ƒä¸æ¶ˆè€—ACTION_DOWNäº‹ä»¶ï¼Œé‚£ä¹ˆåŒä¸€ç³»åˆ—çš„å…¶ä»–äº‹ä»¶ä¹Ÿä¸ä¼šå†äº¤ç»™å®ƒæ¥å¤„ç†ï¼Œå¹¶ä¸”äº‹ä»¶å°†é‡æ–°äº¤ç”±å®ƒçš„çˆ¶å…ƒç´ æ¥å¤„ç†ã€‚ Viewgroupé»˜è®¤ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ã€‚ Viewæ²¡æœ‰onInterceptTouchEventæ–¹æ³•ï¼Œä¸€æ—¦æœ‰ç‚¹å‡»äº‹ä»¶ä¼ é€’ç»™å®ƒï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventæ–¹æ³•å°±ä¼šè°ƒç”¨ã€‚viewçš„longClickableå±žæ€§é»˜è®¤éƒ½æ˜¯falseã€‚ Viewçš„enableå±žæ€§ä¸å½±å“onTouchEventçš„é»˜è®¤è¿”å›žå€¼ï¼Œå³ä¾¿ä¸€ä¸ªviewæ˜¯disableçŠ¶æ€çš„ï¼Œåªè¦å®ƒçš„clickableæˆ–è€…longClickableæœ‰ä¸€ä¸ªä¸ºtrueï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventå°±è¿”å›žtrueã€‚ é€šè¿‡requestDisallowInterceptTouchEventæ–¹æ³•å¯ä»¥åœ¨å­å…ƒç´ ä¸­å¹²é¢„çˆ¶å…ƒç´ çš„äº‹ä»¶åˆ†å‘è¿‡ç¨‹ï¼Œä½†æ˜¯ACTION_DOWNäº‹ä»¶é™¤å¤–ã€‚ ä¸€ä¸ªviewï¼ˆviewgroupé™¤å¤–ï¼‰ï¼Œä¸å¯ç”¨çŠ¶æ€ä¸‹ä¾æ—§ä¼šæ¶ˆè€—æŽ‰ç‚¹å‡»äº‹ä»¶ã€‚ setonclicklistenerå’Œsetlongclicklistenerä¼šè‡ªåŠ¨å°†viewçš„clickableå’Œlongclickable ç³»ç»Ÿå¯èƒ½éœ€è¦å¤šæ¬¡measureæ‰èƒ½ç¡®å®šæœ€ç»ˆçš„æµ‹é‡å®½é«˜ï¼Œåœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œåœ¨onMeasureæ–¹æ³•ä¸­æ‹¿åˆ°çš„æµ‹é‡å®½é«˜å¯èƒ½ä¸å‡†ç¡®ï¼Œå¯ä»¥åœ¨onLayoutæ–¹æ³•ä¸­èŽ·å–Viewçš„æµ‹é‡å®½é«˜æˆ–æœ€ç»ˆå®½é«˜ã€‚ åœ¨activityä¸­èŽ·å–viewçš„å®½é«˜å‡†ç¡®æ—¶æœºåœ¨äºŽï¼š onWindowFocusChangedã€‚è¯¥æ–¹æ³•çš„å«ä¹‰æ˜¯ï¼šviewå·²ç»åˆå§‹åŒ–å®Œæ¯•ï¼Œå®½é«˜å‡†å¤‡å¥½äº†ï¼Œç„¶è€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“activityçš„çª—å£å¤±åŽ»ç„¦ç‚¹å’Œå¾—åˆ°ç„¦ç‚¹éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œå¦‚æžœé¢‘ç¹çš„è°ƒç”¨onresumeå’Œonpauseï¼Œé‚£ä¹ˆonWIndowForcusChangedä¹Ÿä¼šé¢‘ç¹è°ƒç”¨ã€‚ view.post(runnable)ã€‚é€šè¿‡postå¯ä»¥å°†ä¸€ä¸ªrunnableæŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œç„¶åŽç­‰å¾…Looperè°ƒç”¨è¿™ä¸ªrunnableçš„æ—¶å€™ï¼Œviewä¹Ÿå·²ç»åˆå§‹åŒ–å¥½äº†ã€‚ ViewTreeObserverã€‚ä½¿ç”¨ViewTreeObserverçš„ä¼—å¤šå›žè°ƒå¯ä»¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚OnGlobalLayoutListenerè¿™ä¸ªæŽ¥å£ï¼Œæ˜¯å½“Viewæ ‘çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æˆ–viewæ ‘å†…éƒ¨çš„viewçš„å¯è§æ€§å˜åŒ–æ—¶ï¼ŒonGlobalLayoutæ–¹æ³•å°†è¢«å›žè°ƒã€‚ 123456789ViewTreeObserver observer = view.getViewTreeObserver();observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener()&#123; @Override public void onGlobalLayout()&#123; view.getViewTreeObserver().removeGlobalOnLayoutListener(this); int width = view.getMeasuredWidth(); int height = view.getMeasuredHeight(); &#125;&#125;) View.measure(int widthMeasureSpec,int heightMeasureSPec)ã€‚é€šè¿‡æ‰‹åŠ¨å¯¹viewè¿›è¡Œmeasureæ¥å¾—åˆ°viewçš„å®½é«˜ï¼Œè¿™ç§æ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦æ ¹æ®viewçš„layoutParamsæ¥åˆ†ã€‚ - match_parentã€‚ç›´æŽ¥æ”¾å¼ƒï¼Œæ— æ³•measureå‡ºå…·ä½“å®½é«˜ã€‚ å…·ä½“æ•°å­—ï¼ˆdp/pxï¼‰ã€‚ wrap_contentï¼ŒAT_MOSTè®¡ç®—ã€‚ Layoutçš„ä½œç”¨æ˜¯ViewGroupç”¨æ¥ç¡®å®šå­å…ƒç´ çš„ä½ç½®ã€‚ è‡ªå®šä¹‰viewé¡»çŸ¥ï¼š è®©viewæ”¯æŒwrap_content å¦‚æžœæœ‰å¿…è¦ï¼Œè®©viewæ”¯æŒpadding å°½é‡ä¸è¦åœ¨viewä¸­ä½¿ç”¨handlerã€‚å› ä¸ºviewå†…éƒ¨æœ¬èº«æä¾›äº†postç³»åˆ—æ–¹æ³•ï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£handlerçš„ä½œç”¨ã€‚ viewä¸­å¦‚æžœæœ‰çº¿ç¨‹æˆ–è€…åŠ¨ç”»ï¼Œéœ€è¦åŠæ—¶åœæ­¢ã€‚å‚è€ƒonDetachedFromWindowã€‚ä¸Žè¯¥æ–¹æ³•ç›¸å¯¹çš„æ˜¯onAttachedToWindowã€‚å¦‚æžœä¸åŠæ—¶å¤„ç†ï¼Œå¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚ viewå¸¦æœ‰æ»‘åŠ¨åµŒå¥—çš„æ—¶å€™ï¼Œéœ€è¦å¤„ç†å¥½æ»‘åŠ¨å†²çªã€‚ remoteviewåœ¨å®žé™…å¼€å‘ä¸­ï¼Œä¸»è¦ç”¨äºŽé€šçŸ¥æ å’Œæ¡Œé¢å°éƒ¨ä»¶çš„å¼€å‘è¿‡ç¨‹ã€‚remoteviewæ˜¯è¿è¡Œåœ¨systemServerè¿›ç¨‹ä¸­ï¼Œä¸ºäº†è·¨è¿›ç¨‹æ›´æ–°é¡µé¢ï¼ŒRemoteViewæä¾›ä¸€ç³»åˆ—çš„setæ–¹æ³•ã€‚ APPWidgetProvideræ˜¯Androidä¸­æä¾›çš„ç”¨äºŽå®žçŽ°æ¡Œé¢å°éƒ¨ä»¶çš„ç±»ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªå¹¿æ’­ã€‚æ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™éœ€è¦åœ¨Manifestæ–‡ä»¶ä¸­å£°æ˜Žæ³¨å†Œã€‚ PendingIntentæ”¯æŒä¸‰ç§å¾…å®šæ„å›¾ï¼šå¯åŠ¨activityï¼Œå¯åŠ¨serviceå’Œå‘é€å¹¿æ’­ Drawableæœ‰å¾ˆå¤šç§ã€‚ LayerDrawableã€‚LayerDrawableå¯¹åº”çš„XMLæ ‡ç­¾æ˜¯ ,å®ƒè¡¨ç¤ºä¸€ç§å±‚æ¬¡åŒ–çš„Drawableé›†åˆï¼Œé€šè¿‡å°†ä¸åŒçš„Drawableæ”¾ç½®åœ¨ä¸åŒçš„å±‚ä¸Šé¢ä»Žè€Œè¾¾åˆ°ä¸€ç§å åŠ åŽçš„æ•ˆæžœã€‚ StateListDrawableå¯¹åº”äºŽæ ‡ç­¾ï¼Œæ¯ä¸ªDrawableéƒ½å¯¹åº”viewçš„ä¸€ç§çŠ¶æ€ã€‚ LevelListDrawableã€‚å¯¹åº”äºŽæ ‡ç­¾ï¼Œå®ƒä¹Ÿè¡¨ç¤ºä¸€ä¸ªDrawableé›†åˆï¼Œé›†åˆä¸­çš„æ¯ä¸ªDrawableéƒ½æœ‰ä¸€ä¸ªç­‰çº§ï¼ˆlevelï¼‰çš„æ¦‚å¿µã€‚æ ¹æ®ä¸åŒçš„ç­‰çº§ï¼ŒLevelListDrawableä¼šåˆ‡æ¢ä¸ºå¯¹åº”çš„Drawableã€‚ transitionDrawableå¯¹åº”äºŽæ ‡ç­¾ï¼Œç”¨äºŽå®žçŽ°Drawableä¹‹é—´çš„æ·¡å…¥å’Œæ·¡å‡ºæ•ˆæžœã€‚ InsertDrawableå¯¹åº”äºŽæ ‡ç­¾ï¼Œå¯ä»¥æŠŠå…¶å®ƒDrawableå†…åµŒåˆ°è‡ªå·±å½“ä¸­ã€‚ ScaleDrawableå¯¹åº”äºŽscaleæ ‡ç­¾ï¼Œä»–å¯ä»¥æ ¹æ®è‡ªå·±çš„ç­‰çº§å°†æŒ‡å®šçš„Drawableç¼©æ”¾åˆ°ä¸€å®šæ¯”ä¾‹ã€‚ ClipDrawableï¼Œå¯¹åº”äºŽæ ‡ç­¾ï¼Œä»–å¯ä»¥æ ¹æ®è‡ªå·±å½“å‰çš„ç­‰çº§æ¥è£å‰ªå¦ä¸€ä¸ªDrawableï¼Œè£å‰ªæ–¹å‘å¯ä»¥é€šè¿‡android:clipOrientationå’Œandroid:gravityè¿™ä¸¤ä¸ªå±žæ€§æ¥å…±åŒæŽ§åˆ¶ã€‚ interpolatorï¼Œè¡¨ç¤ºåŠ¨ç”»é›†åˆæ‰€é‡‡ç”¨çš„å·®å€¼å™¨ï¼Œå·®å€¼å™¨å½±å“åŠ¨ç”»çš„é€Ÿåº¦ï¼Œè¯¥å±žæ€§çš„é»˜è®¤å€¼æ˜¯åŠ é€Ÿå‡é€Ÿå·®å€¼å™¨ã€‚ shareInterpolatorï¼Œè¡¨ç¤ºé›†åˆä¸­çš„åŠ¨ç”»æ˜¯å¦å’Œé›†åˆå…±äº«åŒä¸€ä¸ªå·®å€¼å™¨ã€‚ è‡ªå®šä¹‰åŠ¨ç”»æ˜¯ä¸€ä»¶æ—¢ç®€å•åˆå¤æ‚çš„äº‹æƒ…ã€‚æ´¾ç”Ÿä¸€ç§æ–°çš„åŠ¨ç”»åªéœ€è¦ç»§æ‰¿Animationè¿™ä¸ªæŠ½è±¡ç±»ï¼Œç„¶åŽé‡å†™å®ƒçš„initializeå’ŒapplyTransformationæ–¹æ³•ã€‚åœ¨initializeæ–¹æ³•ä¸­åšä¸€ä¸‹åˆå§‹åŒ–å·¥ä½œï¼Œåœ¨applyTransformationä¸­è¿›è¡Œç›¸åº”çš„çŸ©é˜µå˜æ¢å³å¯ã€‚ activityçš„åˆ‡æ¢æ•ˆæžœï¼Œä¸»è¦ç”¨åˆ°overridePendingTransition(int enterAnim,int exitAnim)è¿™ä¸ªæ–¹æ³•ã€‚overridePendingTransitionè¿™ä¸ªæ–¹æ³•å¿…é¡»ç”¨äºŽstartActivityæˆ–è€…finishçš„åŽé¢ï¼Œå¦åˆ™åŠ¨ç”»æ•ˆæžœä¸èµ·ä½œç”¨ã€‚ fragmentä¹Ÿå¯ä»¥æ·»åŠ åˆ‡æ¢åŠ¨ç”»ï¼Œç”±äºŽfragmentæ˜¯API11çš„æ–°å¼•å…¥çš„ç±»ï¼Œå› æ­¤ä¸ºäº†å…¼å®¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨support-v4è¿™ä¸ªå…¼å®¹åŒ…ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡fragmentTransactionä¸­çš„setCustomAnimationï¼ˆï¼‰æ–¹æ³•æ¥æ·»åŠ åˆ‡æ¢åŠ¨ç”»ã€‚PSï¼šåˆ‡æ¢åŠ¨ç”»éœ€è¦æ˜¯ViewåŠ¨ç”»ï¼Œä¹‹æ‰€ä»¥ä¸é€‚ç”¨å±žæ€§åŠ¨ç”»ï¼Œæ˜¯å› ä¸ºå±žæ€§åŠ¨ç”»ä¹Ÿæ˜¯API11å¼•å…¥çš„ å±žæ€§åŠ¨ç”»å¯ä»¥å¯¹ä»»æ„å¯¹è±¡çš„å±žæ€§è¿›è¡ŒåŠ¨ç”»ï¼Œè€Œä¸ä»…ä»…æ˜¯Viewï¼ŒåŠ¨ç”»é»˜è®¤æ—¶é—´é—´éš”æ˜¯300msï¼Œé»˜è®¤å¸§çŽ‡10ms/å¸§ã€‚å…¶è¾¾åˆ°çš„æ•ˆæžœæ˜¯ï¼šåœ¨ä¸€ä¸ªæ—¶é—´é—´éš”å†…å®Œæˆå¯¹è±¡ä»Žä¸€ä¸ªå±žæ€§å€¼åˆ°å¦ä¸€ä¸ªå±žæ€§å€¼çš„æ”¹å˜ã€‚å±žæ€§åŠ¨ç”»æ˜¯ä»ŽAPI11æ‰å¼•å…¥çš„ã€‚ æ’å€¼å™¨ã€‚TimeInterpolatorï¼Œæ—¶é—´æ’å€¼å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ ¹æ®æ—¶é—´æµé€çš„ç™¾åˆ†æ¯”æ¥è®¡ç®—å‡ºå½“å‰å±žæ€§å€¼æ”¹å˜çš„ç™¾åˆ†æ¯”ï¼Œç³»ç»Ÿé¢„è®¾çš„æœ‰LInearInterpolator(åŒ€é€Ÿ)ï¼ŒAccelerateDecelerateInterpolator(åŠ é€Ÿå‡é€Ÿ)å’ŒDecelerateInterpolatorï¼ˆå‡é€Ÿï¼‰ç­‰ã€‚TypeEvaluatorï¼Œç±»åž‹ä¼°å€¼ç®—æ³•ï¼Œä¹Ÿå«ä¼°å€¼å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ ¹æ®å½“å‰å±žæ€§æ”¹å˜çš„ç™¾åˆ†æ¯”è®¡ç®—æ”¹å˜åŽçš„å±žæ€§å€¼ã€‚ç³»ç»Ÿé¢„è®¾çš„æœ‰IntEvaluatorï¼ŒFloatEvaluatorå’ŒArgbEvaluatorã€‚æ’å€¼å™¨å’Œä¼°å€¼å™¨ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚ å±žæ€§åŠ¨ç”»çš„ç›‘å¬å™¨ã€‚å±žæ€§åŠ¨ç”»æä¾›äº†ç›‘å¬å™¨ç”¨äºŽç›‘å¬åŠ¨ç”»çš„æ’­æ”¾è¿‡ç¨‹ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæŽ¥å£AnimatorUpdateListenerå’ŒAnimatorListenerã€‚ å±žæ€§åŠ¨ç”»ç”Ÿæ•ˆçš„ä¸¤ä¸ªæ¡ä»¶ï¼š1ã€å¯¹è±¡å¿…é¡»æä¾›setæ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰åˆå§‹å€¼ï¼Œè¿˜è¦æä¾›getæ–¹æ³•ï¼ˆå¦‚æžœè¿™æ¡ä¸æ»¡è¶³ï¼Œç¨‹åºç›´æŽ¥crashï¼‰ï¼›2ã€å¯¹è±¡çš„setæ–¹æ³•å¯¹å±žæ€§çš„ä¿®æ”¹å¿…é¡»é€šè¿‡æŸç§æ–¹å¼åæ˜ å‡ºæ¥ï¼Œæ¯”å¦‚UIçš„æ”¹å˜ä¹‹ç±»çš„ï¼ˆå¦‚æžœè¿™æ¡ä¸æ»¡è¶³ï¼ŒåŠ¨ç”»æ— æ•ˆæžœï¼Œä½†ä¸ä¼šcrashï¼‰ æ¯ä¸€ä¸ªwindowéƒ½å¯¹åº”ä¸€ä¸ªViewå’Œä¸€ä¸ªViewRootImpl,windowå’Œviewæ˜¯é€šè¿‡ViewRootImplæ¥å»ºç«‹è”ç³»çš„.windowManageræä¾›çš„ä¸‰ä¸ªæŽ¥å£æ–¹æ³•addViewã€updateViewLayoutå’ŒremoveViewéƒ½æ˜¯é’ˆå¯¹Viewçš„ï¼Œè¯´æ˜ŽViewæ‰æ˜¯Windowå­˜åœ¨çš„å®žä½“ã€‚åœ¨å®žé™…ä½¿ç”¨ä¸­ï¼Œæ— æ³•ç›´æŽ¥è®¿é—®windowï¼Œè€Œæ˜¯é€šè¿‡windowManagerã€‚windowçš„æ“ä½œæ˜¯IPCçš„è¿‡ç¨‹ã€‚ viewæ˜¯Androidä¸­çš„è§†å›¾çš„å‘ˆçŽ°æ–¹å¼ï¼Œä½†æ˜¯viewä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œä»–å¿…é¡»ä¾é™„åœ¨Windowè¿™ä¸ªæŠ½è±¡çš„æ¦‚å¿µä¸Šï¼Œå› æ­¤æœ‰è§†å›¾çš„åœ°æ–¹å°±æœ‰windowã€‚ æ™®é€šdialogæœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ï¼Œå°±æ˜¯å¿…é¡»é‡‡ç”¨activityçš„contextï¼Œå¦‚æžœé‡‡ç”¨Applicationçš„contextï¼Œå°±ä¼šæŠ¥é”™æ²¡æœ‰åº”ç”¨tokenï¼Œè€Œåº”ç”¨tokenä¸€èˆ¬åªæœ‰activityæ‹¥æœ‰ã€‚å¦å¤–ï¼Œç³»ç»Ÿwindowæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸éœ€è¦tokenã€‚ é™æ€æ³¨å†Œçš„å¹¿æ’­åœ¨åº”ç”¨å®‰è£…æ—¶æœ‰ç³»ç»Ÿè‡ªåŠ¨å®Œæˆæ³¨å†Œï¼Œå…·ä½“æ¥è¯´æ˜¯ç”±PMSï¼ˆpackageManagerServiceï¼‰æ¥å®Œæˆæ•´ä¸ªæ³¨å†Œè¿‡ç¨‹ï¼Œé™¤å¹¿æ’­å¤–ï¼Œå…¶ä»–ä¸‰å¤§ç»„ä»¶ä¹Ÿéƒ½æ˜¯åœ¨åº”ç”¨å®‰è£…æ—¶ç”±PMSè§£æžå¹¶æ³¨å†Œçš„ã€‚åŠ¨æ€æ³¨å†Œçš„è¿‡ç¨‹æ˜¯ä»ŽContextWrapperçš„registerReceiveræ–¹æ³•å¼€å§‹çš„ã€‚ å¹¿æ’­çš„å‘é€æœ‰å‡ ç§ç±»åž‹ï¼šæ™®é€šå¹¿æ’­ï¼Œæœ‰åºå¹¿æ’­å’Œç²˜æ€§å¹¿æ’­ã€‚ ContentProviderçš„oncreateè¦å…ˆäºŽApplicationçš„onCreateè€Œæ‰§è¡Œã€‚è¿™åœ¨å››å¤§ç»„ä»¶ä¸­æ˜¯å°‘æœ‰çš„çŽ°è±¡ã€‚ContentProvideræä¾›çš„å¢žåˆ æ”¹æŸ¥å››ä¸ªæŽ¥å£æ“ä½œContentProviderçš„æ•°æ®æºã€‚è¿™å››ä¸ªæ–¹æ³•éƒ½æ˜¯é€šè¿‡Binderæ¥è°ƒç”¨çš„ï¼Œå¤–ç•Œæ— æ³•ç›´æŽ¥è®¿é—®ContentProviderï¼Œå®ƒåªèƒ½é€šè¿‡AMSæ ¹æ®Uriæ¥èŽ·å–å¯¹åº”çš„ContentProviderçš„BinderæŽ¥å£IContentProviderï¼Œç„¶åŽé€šè¿‡IContentProvideræ¥è®¿é—®ContentProviderã€‚ ä¸€èˆ¬æ¥è¯´ContentProvideréƒ½åº”è¯¥æ˜¯å•ä¾‹çš„ï¼Œå®ƒæ˜¯å¦å•ä¾‹æ˜¯ç”±å®ƒçš„android:multiprocesså±žæ€§æ¥å†³å®šçš„ã€‚å½“è¿™ä¸ªå±žæ€§æ˜¯falseæ—¶ï¼ŒContentProvideræ˜¯å•ä¾‹ï¼Œå½“å±žæ€§ä¸ºtrueæ—¶ï¼ŒContentProvideræ˜¯å¤šå®žä¾‹çš„ã€‚æ¯ä¸ªè°ƒç”¨è€…çš„è¿›ç¨‹ä¸­éƒ½ä¼šå­˜åœ¨ä¸€ä¸ªContentProviderå¯¹è±¡ã€‚ Androidçš„æ¶ˆæ¯æœºåˆ¶ä¸»è¦æ˜¯æŒ‡Handlerçš„è¿è¡Œæœºåˆ¶ï¼ŒHandlerçš„è¿è¡Œéœ€è¦åº•å±‚çš„MessageQueueå’ŒLooperçš„æ”¯æ’‘ã€‚MessageQueueè™½ç„¶åä¸ºé˜Ÿåˆ—ï¼Œä½†æ˜¯å†…éƒ¨ç¡®å®žé‡‡ç”¨å•é“¾è¡¨çš„æ•°æ®ç»“æž„æ¥å­˜å‚¨æ¶ˆæ¯åˆ—è¡¨ã€‚Looperä¸­è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ¦‚å¿µï¼Œå°±æ˜¯ThreadLocalã€‚ThreadLocalå¹¶ä¸æ˜¯çº¿ç¨‹ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯ä»¥åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å­˜å‚¨æ•°æ®ã€‚Handleråˆ›å»ºçš„æ—¶å€™ä¼šé‡‡ç”¨å½“å‰çº¿ç¨‹çš„Looperæ¥æž„é€ æ¶ˆæ¯å¾ªçŽ¯ç³»ç»Ÿï¼Œé‚£ä¹ˆHandlerå¯ä»¥é€šè¿‡ThreadLocalå¯ä»¥èŽ·å–åˆ°æ¯ä¸ªçº¿ç¨‹çš„Looperã€‚å½“ç„¶éœ€è¦æ³¨æ„çš„æ˜¯ çº¿ç¨‹æ˜¯é»˜è®¤æ²¡æœ‰Looperçš„ï¼Œå¦‚æžœéœ€è¦ä½¿ç”¨Handlerå°±å¿…é¡»ä¸ºçº¿ç¨‹åˆ›å»ºLooperã€‚UIçº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ActivityThreadè¢«åˆ›å»ºæ—¶ä¼šåˆå§‹åŒ–Looperï¼Œè¿™ä¹Ÿæ˜¯ä¸»çº¿ç¨‹ä¸­é»˜è®¤å¯ä»¥ä½¿ç”¨Handlerçš„åŽŸå› ã€‚ ç³»ç»Ÿä¸å…è®¸å­çº¿ç¨‹è®¿é—®UIçš„åŽŸå› åœ¨äºŽï¼šAndroidçš„UIæŽ§ä»¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æžœåœ¨å¤šçº¿ç¨‹ä¸­å¹¶å‘è®¿é—®å¯èƒ½å¯¼è‡´UIæŽ§ä»¶å¤„äºŽä¸å¯é¢„æœŸçš„çŠ¶æ€ã€‚é‚£ä¹ˆä¸ç»™UIæŽ§ä»¶åŠ é”æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„åŽŸå› ï¼Œä¹Ÿæœ‰ä¸€äº›ï¼Œä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼šé¦–å…ˆåŠ é”æœºåˆ¶ä¼šè®©UIè®¿é—®çš„é€»è¾‘å˜å¾—å¤æ‚ï¼›å…¶æ¬¡ï¼ŒåŠ é”ä¼šé™ä½ŽUIè®¿é—®çš„æ•ˆçŽ‡ï¼Œå› ä¸ºé”ä¼šé˜»å¡žçº¿ç¨‹çš„æ‰§è¡Œã€‚ç”±æ­¤å¯¹æ¯”ï¼Œä½¿ç”¨handleræ›´åŠ çš„ç®€å•é«˜æ•ˆã€‚ ThreadLocalæ˜¯ä¸€ä¸ªçº¿ç¨‹å†…éƒ¨çš„æ•°æ®å­˜å‚¨ç±»ï¼Œé€šè¿‡å®ƒå¯ä»¥åœ¨æŒ‡å®šçš„çº¿ç¨‹ä¸­å­˜å‚¨æ•°æ®ã€‚ çº¿ç¨‹æ± çš„æœ‰ç‚¹ï¼š1ï¼‰é‡ç”¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œé¿å…å› ä¸ºçº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼›2ï¼‰èƒ½æœ‰æ•ˆæŽ§åˆ¶çº¿ç¨‹æ± çš„æœ€å¤§å¹¶å‘æ•°ï¼Œé¿å…å¤§é‡çš„çº¿ç¨‹ä¹‹é—´å› ä¸ºäº’ç›¸æŠ¢å ç³»ç»Ÿèµ„æºè€Œå¯¼è‡´çš„é˜»å¡žçŽ°è±¡ã€‚3ï¼‰å¯¹çº¿ç¨‹è¿›è¡Œç®€å•çš„ç®¡ç†ï¼Œå¹¶æä¾›å®šæ—¶æ‰§è¡Œä»¥åŠåˆ¶å®šé—´éš”å¾ªçŽ¯æ‰§è¡Œç­‰åŠŸèƒ½ã€‚ CrashHandleræ¥ç›‘è§†åº”ç”¨çš„crashä¿¡æ¯ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç¬”è®°</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»£ç æ•´æ´ä¹‹é“ç¬”è®°]]></title>
    <url>%2F2019%2F06%2F19%2F%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ä»£ç å‘½åéœ€è¦è§„èŒƒç›´æŽ¥ï¼Œå¯ä»¥ä¸€çœ¼çœ‹å‡ºæ¥å‘½åçš„å«ä¹‰ å³ä¾¿å®¹å™¨å°±æ˜¯ä¸€ä¸ªlistï¼Œæœ€å¥½ä¹Ÿåˆ«åœ¨åç§°ä¸­å†™å‡ºå®¹å™¨ç±»åž‹å ä»£ç å‘½åè¦åšæœ‰æ„ä¹‰çš„åŒºåˆ†ï¼Œä¸è¦ä½¿ç”¨infoï¼Œdataç­‰è¿™æ ·æ²¡æœ‰å®žé™…æ„ä¹‰çš„æ–‡å­—åŽ»åšåŒºåˆ† ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ï¼›åˆ¤æ–­ä¸€ä¸ªå‡½æ•°æ˜¯å¦åªåšäº†ä¸€ä»¶äº‹ï¼Œå°±çœ‹è¯¥å‡½æ•°æ˜¯å¦å¯ä»¥åˆç†çš„åˆ‡åˆ†æˆå¤šä¸ªåŒºæ®µã€‚ è‡ªé¡¶å‘ä¸‹çš„è§„åˆ™ï¼šè®©ä»£ç æ‹¥æœ‰è‡ªé¡¶å‘ä¸‹çš„é˜…è¯»é¡ºåºï¼Œè®©æ¯ä¸€ä¸ªå‡½æ•°åŽé¢éƒ½è·Ÿç€ä¸‹ä¸€æŠ½è±¡å±‚çº§çš„å‡½æ•°ï¼Œè¿™æ ·ï¼Œåœ¨æŸ¥çœ‹å‡½æ•°åˆ—è¡¨çš„æ—¶å€™ï¼Œå°±èƒ½å¾ªç€æŠ½è±¡å±‚çº§å‘ä¸‹é˜…è¯»äº†ã€‚ å¯¹äºŽswitchè¯­å¥ï¼Œä¸€èˆ¬ç”¨äºŽåˆ›å»ºå¤šæ€å¯¹è±¡ï¼Œè€Œä¸”éšè—åœ¨æŸä¸ªç»§æ‰¿å…³ç³»ä¸­ï¼Œåœ¨ç³»ç»Ÿå…¶å®ƒéƒ¨åˆ†çœ‹ä¸è§ã€‚å³ä¸€èˆ¬ç”¨äºŽå·¥åŽ‚æ¨¡å¼ä¸­ã€‚ åˆ«å®³æ€•é•¿åå­—ï¼Œé•¿è€Œå…·æœ‰æè¿°æ€§çš„åç§°ï¼Œè¦æ¯”çŸ­è€Œä»¤äººè´¹è§£çš„åç§°å¥½ï¼Œé•¿è€Œå…·æœ‰æè¿°æ€§çš„åç§°ï¼Œè¦æ¯”æè¿°æ€§çš„é•¿æ³¨é‡Šå¥½ã€‚ å°½é‡å‡å°‘å‡½æ•°å‚æ•°ï¼Œä¸€èˆ¬ä¸å®œè¶…è¿‡ä¸‰ä¸ªã€‚ ä¾èµ–ç£é“ã€‚å…¶å®ƒè®¸å¤šç±»éƒ½éœ€è¦å¯¼å…¥æˆ–ä½¿ç”¨è¯¥ç±»ï¼Œä¾‹å¦‚ï¼šå¸¸é‡ç±»ã€‚ é¿å…ä»£ç é‡å¤ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé¢å‘ç»„ä»¶ç¼–ç¨‹å…¶ä¸­éƒ½åŒ…å«æ¶ˆé™¤é‡å¤ä»£ç çš„æ€æƒ³ã€‚ å‡½æ•°æ˜¯è¯­è¨€çš„åŠ¨è¯ï¼Œç±»æ˜¯åè¯ ðŸ‘¨â€ðŸ’»â€åº”è¯¥è´Ÿè´£å°†æ³¨é‡Šä¿æŒåœ¨å¯ç»´æŠ¤ï¼Œæœ‰å…³è”ï¼Œç²¾ç¡®çš„é«˜åº¦ï¼Œä½†æ˜¯æ›´åŠ éœ€è¦æ³¨é‡çš„èƒ½åŠ›æ˜¯ä»£ç å°½é‡çš„æ˜Žç¡®ç®€æ´ï¼Œå°½é‡çš„ä¸è¦ä¾èµ–äºŽæ³¨é‡Š TODOæ³¨é‡Šæ ‡è®°æ—¶ï¼Œå®Œæˆä¹‹åŽéœ€è¦åŠæ—¶æ¸…ç† ç¼–å†™å…¬å…±APIçš„æ—¶å€™ï¼Œå°½é‡ç¼–å†™å®Œæ•´çš„javadocï¼Œå½“ç„¶ï¼Œä¹Ÿéœ€è¦æ³¨æ„ä¸Šé¢å‡ æ¡æç¤ºï¼Œä¿è¯javadocçš„å¯ç»´æŠ¤æ€§å’Œç²¾ç¡®æ€§ã€‚ æ³¨é‡Šéœ€è¦æ¸…æ™°å®Œæ•´ï¼Œä¸è¦è®©çœ‹åˆ°çš„äººéœ€è¦è”ç³»ä¸Šä¸‹æ–‡æ‰èƒ½ç†è§£æ³¨é‡Šçš„ èƒ½ç”¨å‡½æ•°æˆ–å˜é‡æ—¶å°±åˆ«ç”¨æ³¨é‡Šï¼Œå¯ä»¥æŠŠä¸€ä¸ªç›¸å½“é•¿çš„è¡¨è¾¾å¼æ‹†åˆ†æˆçŸ­å°ç›´è§‚çš„å¤šä¸ªè¡¨è¾¾å¼ï¼Œå¥½å¤„åœ¨äºŽå…¶ä¸€ï¼Œä¾¿äºŽé˜…è¯»å’Œç»´æŠ¤ï¼Œå…¶äºŒï¼Œä¾¿äºŽé¿å…é€»è¾‘æ¼æ´žã€‚ æ¸…ç†æ³¨é‡ŠæŽ‰çš„ä»£ç ï¼Œå› ä¸º99%çš„æƒ…å†µä¸‹æ³¨é‡ŠæŽ‰çš„ä»£ç ä¸ä¼šå†ç”¨åˆ°ã€‚ ä¸€ä¸ªé¡¹ç›®ä¸­åº”è¯¥ä¿æŒä¸€å¥—ä¸€è‡´çš„ä»£ç æ ¼å¼è§„åˆ™ å‡½æ•°æˆ–å±žæ€§ä¹‹é—´çš„åž‚ç›´è·ç¦»ã€‚å…³ç³»å¯†åˆ‡çš„æ¦‚å¿µåº”è¯¥ç›¸äº’é è¿‘ã€‚å˜é‡å£°æ˜Žåº”è¯¥å°½å¯èƒ½é è¿‘å…¶ä½¿ç”¨ä½ç½®ï¼›å®žä½“å˜é‡åº”è¯¥åœ¨ç±»çš„é¡¶éƒ¨å£°æ˜Žã€‚è‹¥æŸä¸ªå‡½æ•°è°ƒç”¨äº†å¦ä¸€ä¸ªï¼Œå°±åº”è¯¥æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶ä¸”è°ƒç”¨è€…æ”¾åœ¨è¢«è°ƒç”¨è€…ä¹‹ä¸Šï¼Œè¿™æ ·ä¼šå½¢æˆè‡ªä¸Šè€Œä¸‹çš„è°ƒç”¨é¡ºåºã€‚æ¦‚å¿µç›¸å…³çš„ä»£ç ä¹Ÿåº”è¯¥æ”¾åœ¨ä¸€èµ·(ç›¸å…³æ€§åŒ…æ‹¬ç›¸äº’è°ƒç”¨ï¼ŒåŒä¸€ç»„å‡½æ•°æˆ–è€…æ‰§è¡Œç›¸ä¼¼æ“ä½œçš„ä»£ç ) ä»£ç è¡Œå°½å¯èƒ½çš„ç®€çŸ­ï¼Œä¸éœ€è¦æ‹–åŠ¨æ»šåŠ¨æ¡å°±å¯ä»¥æŸ¥çœ‹å®Œæ•´è¿™ä¸€è¡Œçš„ä»£ç ï¼›è¿™ä¹Ÿæ„å‘³ç€å‡½æ•°é•¿åº¦ä¸è¦è¿‡é•¿ï¼Œä¸è¦ä¸€å¥ä»£ç åµŒå¥—å¤ªå¤šå‡½æ•°ï¼Œæœ€å¥½æ˜¯åˆ†æˆå¤šè¡Œç®€çŸ­çš„ä»£ç ï¼Œè¿™æ ·å¢žåŠ ä»£ç å¯è¯»æ€§ã€‚ éšè—å®žçŽ°å¹¶éžåªæ˜¯åœ¨å˜é‡ä¹‹é—´æ”¾ä¸Šä¸€ä¸ªå‡½æ•°å±‚é‚£ä¹ˆç®€å•ï¼Œéšè—å®žçŽ°å…³ä¹ŽæŠ½è±¡ï¼Œç±»å¹¶ä¸ç®€å•çš„ç”¨getï¼Œsetæ–¹æ³•å°†å˜é‡å®Œå…¨æš´éœ²å‡ºæ¥ï¼Œè€Œæ˜¯æš´éœ²æŠ½è±¡æŽ¥å£ï¼Œä»¥ä¾¿ç”¨æˆ·æ— éœ€äº†è§£æ•°æ®çš„å®žçŽ°å°±èƒ½æ“ä½œæ•°æ®æœ¬ä½“ã€‚(å³ç”¨æˆ·å¯ä»¥ç›´æŽ¥ä½¿ç”¨çŽ°æœ‰çš„å®žçŽ°è€Œæ— éœ€å…³å¿ƒå®žçŽ°çš„ç»†èŠ‚) é¢å‘å¯¹è±¡çš„ç¼–ç¨‹åœ¨äºŽä¸æ”¹å˜çŽ°æœ‰çš„å‡½æ•°ï¼Œè€Œæ˜¯å¢žåŠ æ–°çš„ç±»ï¼›é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ˜¯ä¸éœ€è¦å¢žåŠ æ–°çš„ç±»ï¼Œè€Œæ˜¯ä¿®æ”¹å‡½æ•°ã€‚ä¸¤è€…å„æœ‰ä½¿ç”¨åœºæ™¯ï¼› å¾·å¢¨å¿’è€³å¾‹è®¤ä¸ºï¼Œæ¨¡å—ä¸åº”äº†è§£å®ƒæ‰€æ“ä½œå¯¹è±¡çš„å†…éƒ¨æƒ…å½¢ï¼Œè¿™æ„å‘³ç€å¯¹è±¡ä¸åº”é€šè¿‡å­˜å–å™¨æš´éœ²å…¶å†…éƒ¨ç»“æž„ã€‚ è¿žä¸²è°ƒç”¨ä¸€èˆ¬è¢«ç§°ä¸ºç«è½¦å¤±äº‹ï¼Œé€šå¸¸è¢«è®¤ä¸ºæ˜¯è‚®è„çš„é£Žæ ¼ï¼Œåº”è¯¥é¿å…ã€‚ æ··æ‚è°ƒç”¨ä¹Ÿæ˜¯éœ€è¦é¿å…çš„å‡½æ•°è°ƒç”¨æ–¹å¼ï¼ŒåŒä¸€ä¸ªå¯¹è±¡è°ƒç”¨ä¸­ï¼Œåº”å½“å°½é‡éšè—å†…éƒ¨å®žçŽ°ç»†èŠ‚ã€‚ DTO(data transfer objects)ï¼›æœ€ä¸ºç²¾ç»ƒå¾—æ•°æ®ç»“æž„ï¼Œæ˜¯ä¸€ä¸ªåªæœ‰å…¬å…±å˜é‡ï¼Œæ²¡æœ‰å‡½æ•°çš„ç±»ã€‚è¿™ç§æ•°æ®ç»“æž„æœ‰æ—¶è¢«ç§°ä¸ºæ•°æ®ä¼ é€å¯¹è±¡ã€‚ä¸€èˆ¬åœ¨ä¸Žæ•°æ®åº“é€šä¿¡ã€æˆ–è§£æžå¥—æŽ¥å­—ä¼ é€’çš„æ¶ˆæ¯ä¹‹ç±»çš„åœºæ™¯ä¸­ã€‚ ä½¿ç”¨å¼‚å¸¸ï¼Œè€Œéžè¿”å›žç ã€‚å› ä¸ºå¼‚å¸¸æ˜¯éœ€è¦æ˜¾å¼çš„å¤„ç†æˆ–æŠ›å‡ºï¼›è€Œå¦‚æžœä½¿ç”¨è¿”å›žç ï¼Œè°ƒç”¨è€…å¾ˆå®¹æ˜“å¿˜è®°å¤„ç†ã€‚ æ‰“åŒ…ç¬¬ä¸‰æ–¹åº“ï¼Œå³æŠŠå¯¹ç¬¬ä¸‰æ–¹åº“çš„è°ƒç”¨å°è£…ï¼Œé‚£ä¹ˆåŽç»­æœ‰ä»€ä¹ˆä¿®æ”¹åªéœ€è¦æ”¹åŠ¨å°è£…ç±»å³å¯ï¼Œé¿å…æ•´ä¸ªé¡¹ç›®å¤§é‡çš„ä¿®æ”¹ã€‚ å°½é‡é¿å…è¿”å›žnullå€¼ï¼Œè¿”å›žnullå€¼ï¼Œè°ƒç”¨è€…å°±éœ€è¦æœ‰å„ç§ç©ºåˆ¤æ–­ã€‚ åˆ«ä¼ é€’nullå€¼ï¼Œ è¦†ç›–ç”Ÿäº§ä»£ç çš„è‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•ç¨‹åºç»„èƒ½å°½å¯èƒ½çš„ä¿æŒè®¾è®¡å’Œæž¶æž„çš„æ•´æ´ã€‚ æ•´æ´çš„æµ‹è¯•éœ€è¦éµå¾ªä»¥ä¸‹5æ¡è§„åˆ™FIRSTï¼›Fï¼šå¿«é€Ÿæ‰§è¡Œï¼›Iï¼šæµ‹è¯•åº”å½“ç›¸äº’ç‹¬ç«‹ï¼ŒæŸä¸ªæµ‹è¯•ä¸åº”ä¸ºä¸‹ä¸€ä¸ªæµ‹è¯•çš„è®¾å®šæ¡ä»¶ï¼›Rï¼šå¯é‡å¤ï¼Œæµ‹è¯•åº”è¯¥åœ¨ä»»ä½•çŽ¯å¢ƒä¸‹é‡å¤é€šè¿‡ï¼›Sï¼šè‡ªè¶³éªŒè¯ï¼Œæµ‹è¯•åº”è¯¥æœ‰å¸ƒå°”å€¼è¾“å‡ºï¼Œæ— è®ºé€šè¿‡è¿˜æ˜¯å¤±è´¥ï¼Œä¸åº”è¯¥é€šè¿‡æŸ¥çœ‹æ—¥å¿—æ¥ç¡®è®¤æµ‹è¯•æ˜¯å¦é€šè¿‡ï¼›Tï¼šæµ‹è¯•åº”è¯¥åŠæ—¶ç¼–å†™ã€‚ ç±»çš„åç§°åº”è¯¥æè¿°å…¶æƒè´£ï¼Œå¹¶ä¸”ç±»åº”å½“å°½é‡çš„çŸ­å°ã€‚ç±»åªåº”æœ‰ä¸€ä¸ªæƒè´£ï¼Œå³å•ä¸€æƒè´£åŽŸåˆ™(SRP)ã€‚å½“ç„¶ä¹Ÿå› æ­¤å¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„é•¿åº¦ã€‚ å†…èšï¼Œå†…èšæ€§é«˜ï¼Œæ„å‘³ç€ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡äº’ç›¸ä¾èµ–ã€äº’ç›¸ç»“åˆæˆä¸€ä¸ªé€»è¾‘æ•´ä½“ã€‚ ä¾èµ–å€’ç½®åŽŸåˆ™ï¼ˆDIPï¼‰ã€‚dipè®¤ä¸ºç±»åº”å½“ä¾èµ–äºŽæŠ½è±¡è€Œä¸æ˜¯ä¾èµ–äºŽå…·ä½“ç»†èŠ‚ã€‚ éµå¾ªä»¥ä¸‹è§„åˆ™ï¼Œè®¾è®¡å°±èƒ½å˜å¾—ç®€å•ï¼š è¿è¡Œæ‰€æœ‰æµ‹è¯• ä¸å¯é‡å¤ è¡¨è¾¾äº†ç¨‹åºå‘˜çš„æ„å›¾ å°½å¯èƒ½çš„å‡å°‘ç±»å’Œæ–¹æ³•çš„æ•°é‡ ä»¥ä¸Šè§„åˆ™æŒ‰å…¶é‡è¦ç¨‹åº¦æŽ’åˆ— åœ¨é‡æž„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åº”ç”¨æœ‰å…³ä¼˜ç§€è½¯ä»¶è®¾è®¡çš„ä¸€åˆ‡çŸ¥è¯†ï¼Œæå‡å†…èšæ€§ï¼Œé™ä½Žè€¦åˆåº¦ï¼Œåˆ‡åˆ†å…³æ³¨é¢ï¼Œæ¨¡å—åŒ–ç³»ç»Ÿæ€§å…³æ³¨é¢ï¼Œç¼©å°å‡½æ•°å’Œç±»çš„å°ºå¯¸ï¼Œé€‰ç”¨æ›´å¥½çš„åç§°ï¼Œè¿™ä¹Ÿæ˜¯åº”ç”¨ç®€å•è®¾è®¡åŽä¸‰æ¡è§„åˆ™çš„åœ°æ–¹ï¼šæ¶ˆé™¤é‡å¤ï¼Œä¿è¯è¡¨è¾¾åŠ›ï¼Œå°½å¯èƒ½å‡å°‘ç±»å’Œæ–¹æ³•çš„æ•°é‡ã€‚ é€šå¸¸å€¾å‘äºŽé€‰ç”¨éžé™æ€çš„æ–¹æ³•ï¼Œå¦‚æžœç¡®å®žéœ€è¦é™æ€å‡½æ•°ï¼Œç¡®ä¿è¯¥å‡½æ•°æ°¸è¿œä¸éœ€è¦æœ‰å¤šæ€çš„è¡Œä¸ºã€‚ è®©ç¨‹åºå¯è¯»çš„æœ€æœ‰åŠ›æ–¹æ³•ä¹‹ä¸€å°±æ˜¯å°†è®¡ç®—è¿‡ç¨‹æ‰“ç®—æˆæœ‰æ„ä¹‰çš„å•è¯å‘½åçš„å˜é‡ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªè¿˜æ˜¯éœ€è¦ä¸€ä¸ªåº¦ï¼Œä¹Ÿä¸èƒ½å®Œå…¨æ‹†åˆ†æˆå¾ˆå¤šå˜é‡ï¼Œè¿™æ ·ä¼šé€ æˆä»£ç å†—ä½™ã€‚ å‡½æ•°åç§°åº”è¯¥è¡¨è¾¾å…¶è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œçœ‹å‡½æ•°åç§°å°±å¯ä»¥è®©äººçŸ¥é“è¯¥å‡½æ•°åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚ é€»è¾‘ä¾èµ–æ”¹ä¸ºå‡½æ•°ä¾èµ–ã€‚ä¸€ä¸ªå‡½æ•°çš„ä½¿ç”¨ï¼Œä¸åº”è¯¥å¯¹è°ƒç”¨è€…æœ‰å‡å®šæ¡ä»¶(å³é€»è¾‘ä¾èµ–)ã€‚ ç”¨å‘½åå¸¸é‡ä»£æ›¿é­”æœ¯æ•°ã€‚ ä»£ç ä¸­åº”å½“æ¶ˆé™¤å«ç³Šä¸å®šå’Œä¸å‡†ç¡®çš„å†™æ³•ã€‚ å°è£…æ¡ä»¶ï¼›é¿å…å¦å®šå¼çš„æ¡ä»¶ï¼Œå› ä¸ºå¦å®šå¼çš„æ¡ä»¶æ€»æ˜¯ä¼šæ¯”è‚¯å®šå¼çš„éš¾ä»¥ç†è§£ä¸€äº›ã€‚ å‡½æ•°åªåº”è¯¥åšä¸€ä»¶äº‹ï¼Œå³å‡½æ•°çš„åŽŸå­æ€§ã€‚ ä»£ç ç»“æž„åº”å½“å§‹ç»ˆä¸€è‡´ï¼Œä¸èƒ½éšæ„è®¾å®šå’Œç¼–å†™ã€‚ é¿å…ä¼ é€’æµè§ˆorä¼ é€’è°ƒç”¨ï¼Œå³a.getB().getC().dosomething();è¿™ç§æ–¹æ³•ï¼ŒæŒ‰é“ç†æ¥è¯´ï¼Œaä¸Žbåä½œï¼Œbä¸Žcåä½œï¼Œé‚£ä¹ˆaè·Ÿcä¸åº”å½“æœ‰ç›´æŽ¥è°ƒç”¨ã€‚ ä¸è¦ç»§æ‰¿å¸¸é‡ã€‚]]></content>
      <tags>
        <tag>æŠ€æœ¯ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[test]]></title>
    <url>%2F2019%2F05%2F08%2Ftest%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2019%2F05%2F08%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
